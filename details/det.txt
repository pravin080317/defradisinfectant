Title:
AI-TRACK02 â€“ Implement Download Telemetry for VOA List Schedules by Local Authorities

Description:
We need to extend the Application Insights telemetry to track file downloads of VOA list schedules from the Power Pages portal. This is required for auditing and performance analysis by the business team.

The tracking must capture the following details for each download initiated by a Local Authority (LA):

Date and time when the download occurred

Local Authority (council) that initiated the download

File name being downloaded

File size in bytes

File type/extension (e.g., .pdf, .xls, .csv)

Implementation Tasks:
Hook Download Trigger

Add a JavaScript onclick or download event listener on file download links or buttons.

Capture Metadata

Extract file name, extension, and size (if available via JS or server-side headers).

Log Custom Event to Application Insights

javascript
Copy
Edit
appInsights.trackEvent({
  name: "VOAListScheduleDownload",
  properties: {
    fileName: "voa_report_apr2024.pdf",
    fileType: "pdf",
    fileSize: "204800", // bytes
    timestamp: new Date().toISOString(),
    userId: "{{ user.id }}",
    council: "{{ user.voap_contact_ActiveAccount_account.voa_baccodeacc }}"
  }
});
Test Logging

Confirm that the event is captured correctly in Application Insights and visible in Kusto queries.

Acceptance Criteria:
When a user downloads a VOA list file, a VOAListScheduleDownload event is captured in App Insights.

Each event includes timestamp, file name, file type, file size, and the LA info.

Duplicate entries are avoided for the same download action.
