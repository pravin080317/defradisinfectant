function errorValidation() {
  clearErrorSummary();
  let hasErrors = false;

  for (const input of obj.inputs) {
    if (!input.id) continue;

    const inputId = input.id;
    const message = input.errorMessage || "There is a problem with this field";
    const insertBeforeSelector = input.insertBefore || (input.radio ? ".govuk-radios" : undefined);

    if (input.isValid === false) {
      showErrorMessage(inputId, message, insertBeforeSelector);
      addErrorToSummary(inputId, message);
      hasErrors = true;
    } else {
      clearErrorMessage(inputId);
    }
  }

  toggleErrorSummary(hasErrors);
}
