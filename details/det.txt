<nav class="govuk-pagination" role="navigation" aria-label="Pagination">
  <div class="govuk-pagination_prev">
    {% if pageNumber > 1 %}
      <a class="govuk-link govuk-pagination_link" href="?page={{ pageNumber | minus: 1 }}" rel="prev">
        Previous<span class="govuk-visually-hidden"> page</span>
      </a>
    {% endif %}
  </div>

  <ul class="govuk-pagination_list" id="pagination-container">
    {% assign maxVisible = 5 %}
    {% assign startPage = pageNumber | minus: 2 %}
    {% assign endPage = pageNumber | plus: 2 %}

    {% if startPage < 1 %}
      {% assign endPage = endPage | plus: 1 | minus: startPage %}
      {% assign startPage = 1 %}
    {% endif %}

    {% if endPage > totalPages %}
      {% assign startPage = startPage | minus: endPage | plus: totalPages %}
      {% assign endPage = totalPages %}
      {% if startPage < 1 %}
        {% assign startPage = 1 %}
      {% endif %}
    {% endif %}

    {% for i in (startPage..endPage) %}
      <li class="govuk-pagination_item{% if i == pageNumber %} govuk-pagination_item--current{% endif %}">
        <a class="govuk-link govuk-pagination_link" href="?page={{ i }}"
           aria-label="Page {{ i }}"{% if i == pageNumber %} aria-current="page"{% endif %}>
          {{ i }}
        </a>
      </li>
    {% endfor %}
  </ul>

  <div class="govuk-pagination_next">
    {% if pageNumber < totalPages %}
      <a class="govuk-link govuk-pagination_link" href="?page={{ pageNumber | plus: 1 }}" rel="next">
        Next<span class="govuk-visually-hidden"> page</span>
      </a>
    {% endif %}
  </div>
</nav>
