Here is the full **Map Requirements Table (UI view)**, combining insights from your screenshots and sessions across SBL, smoothing, and comparable tools:

---

### üó∫Ô∏è SBL + Smoothing + Comparable Tool ‚Äì Map Requirements

| #  | Requirement                                                         | Depends On / Trigger                       |
| -- | ------------------------------------------------------------------- | ------------------------------------------ |
| 1  | Plot property pins (UARNs) on map with band-based colour legend     | Filter (Batch, Patch, AVM Output)          |
| 2  | Show batch-level RAG status (Red/Amber/Green)                       | Filter (Batch ID), Processing Status       |
| 3  | Click map pin ‚Üí highlight that UARN in data table                   | Table state (visible list), UARN mapping   |
| 4  | Click table row ‚Üí highlight same pin on map                         | Table row selection                        |
| 5  | Zoom in/out of map and preserve filtered UARN pins                  | Filtered UARNs, map state                  |
| 6  | Dynamic clustering at lower zoom levels                             | Map library feature                        |
| 7  | Tooltip/Popup showing UARN + Band + Address on pin hover            | AVM/UARN attribute feed                    |
| 8  | Display multiple batches overlayed (with distinct legends)          | Batch filter logic                         |
| 9  | Enable drill-through on click: load UARN screen                     | UARN ID, Property drill logic              |
| 10 | Radius-based selection (e.g. 3km view of nearby properties)         | Geo search / spatial buffer API            |
| 11 | Filter pane on left ‚Üí update map instantly (Type, Rooms, EPC, etc.) | Filter bindings                            |
| 12 | Draw polygon/select pins manually for batch reassignment            | Custom interaction logic                   |
| 13 | Colour-coded banding dots (A, B, C, D, etc.) with legend            | Band-Colour mapping                        |
| 14 | "Reset" button to clear filters + map zoom                          | Filter reset state + map config            |
| 15 | Load new smoothing graph when batch changes                         | Chart component binding                    |
| 16 | Map pin click triggers smoothing graph dot focus                    | Shared UARN sync between map & chart       |
| 17 | Visualise outliers (red X or different shape)                       | AVM Outlier flag                           |
| 18 | Drag band margins to reshape band thresholds (on graph)             | User-defined margin ‚Üí trigger model recalc |
| 19 | Display AVM predicted values, price range bands in tooltips         | AVM output + band lookup                   |
| 20 | Navigate to band edit screen via UARN click                         | Drillthrough action routing                |
| 21 | Show smoothing line (log scale) alongside AVM band points           | Smoothed model (frontend charting)         |
| 22 | Click "Edit Batch" ‚Üí navigate to re-banding screen                  | Batch-to-screen routing logic              |
| 23 | Show Band Margin (Model vs. User Input) in separate side panel      | Output Model + Editable Input UX           |
| 24 | Map filters update Band Margin and table below                      | Shared dataset / interdependency           |
| 25 | Heatmap or density view toggle (optional/future)                    | Map control configuration                  |

---

Let me know if you want this grouped by MVP / Advanced / Future tiers, or mapped against **Canvas Default / PCF / ESRI Web Embed** support.
