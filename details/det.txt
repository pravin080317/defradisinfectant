6.2 Deployment Pipeline Flow and Configuration

6.2.1 Deployment Pipeline Overview

The deployment process for the LA Portal consists of two distinct workflows for managing changes:

Case Management Pipeline:

Managed using solutions.

Includes schema changes such as updates to tables, fields, and Power Automate flows.

Changes are managed incrementally through a Delta Solution.

Deployment Workflow:

Development in Dev: Create or update components and track these changes in an Unmanaged solution.

Delta Solution: All new or updated components are added to the Delta solution.

Merging Delta to Main Solution: The Case Management Team merges the Delta solution into the Master Solution and then clears the Delta solution.

Pipeline Deployment: The Case Management team manages the deployment pipeline, moving the Master solution across environments: Dev → FAT → SIT → UAT → MO → PPE → PROD.

LA Portal Pipeline:

Managed using the XRM Portal Code Mover Tool for frontend code-level changes (JavaScript, HTML, CSS).

Deployment Workflow:

Development in Dev: Code changes are implemented and validated locally. Updates are prepared for incremental deployment.

Incremental Deployment to FAT: Using the XRM Portal Code Mover tool, changes are packaged as XML files and deployed to FAT.

CI/CD Pipeline Full Deployment:

FAT to SIT: Automatically handled by the CI/CD pipeline after validation in FAT.

SIT to UAT, MO, PPE: Requires approval from at least one developer and matthew.askill@hmrc.gov.uk.

PPE to PROD: Requires approval from matthew.askill@hmrc.gov.uk.

6.2.2 CI/CD Setup and Release Management Process

Each release is uniquely tagged with a Release Tag provided by the DevOps Release Manager (riyaz.tiruppattur@hmrc.gov.uk) or their team.

All stories/bugs included in the release must be tagged with this release number.

During pipeline execution, the release tag is updated in each environment.

For higher environment deployments (SIT, UAT, MO, PPE, PROD), inform the Release and Deployment teams via Teams chat with details including:

Track: LA PORTAL

Environment(s): SIT, UAT, MO, PPE, PROD

Release Tag(s): e.g., 15.5.LAPortal.1.PPE-PV:1.15.5.002

Release No.: e.g., 1.15.5.002

Description: Clear details of each change including enhancements, deprecations, and bug fixes.

Link Pipelines: LA PORTAL

Start Time: Date of deployment initiation

Deployment Status: Current progress status

6.2.3 Pre-Deployment and Post-Deployment Steps

Pre-deployment Steps:

Validate all changes thoroughly in the Dev environment.

Clearly document and capture descriptions of each change.

Ensure all necessary approvals are planned and received for the target environment.

Ensure the Delta Master solution includes all required updates.

Verify stories and bugs have accurate release tags.

Record start time and deployment details prior to deployment.

Post-deployment Validations:

Validate critical portal functionalities such as multiple uploads, single form submissions, and error handling.

Conduct a Smoke Test to verify the basic operational functionality of the portal.

6.2.4 SharePoint Documentation for Portal Code Changes

For portal deployments, the team maintains comprehensive documentation in SharePoint. This includes:

Detailed records of changes made using the XRM Portal Code Mover.

XML files capturing frontend code updates (JavaScript, HTML, CSS).

Documented change logs and deployment details.

These documents are maintained and organized within the SharePoint release folders, ensuring traceability and easy reference for all deployments.
