Run Book Entry: Application Insights for PA Tracking
Purpose
To track user activity and performance data in the LA Portal (Power Pages) for analysis and reporting by Performance Analysts using Azure Application Insights.

Implementation Summary
Client-side telemetry is enabled using Application Insights JavaScript SDK.

A custom content snippet was created and referenced via the Enable Traffic Analytics feature in Power Pages.

Instrumentation is based on a Connection String, configured securely via a site setting:
applicationinsights/enabletracking.

Captured Telemetry Includes:
User information:

User ID ({{ user.id }} via Liquid)

Full name ({{ user.fullname }} - optional)

Council BAC Code ({{ user.voap_contact_ActiveAccount_account.voa_baccodeacc }})

Session and page tracking:

Session ID generated with crypto.randomUUID() and stored in sessionStorage.

Page title and page URL using trackPageView().

Login time and page load time.

Custom event:

LAPortalTracking event triggered per page view with contextual properties (user, council, status, timestamp).

Technical Highlights
Cookies are disabled to meet security/privacy compliance using:
disableCookiesUsage: true

Session ID is managed manually in session storage to maintain user context across pages.

Telemetry initializers enrich data before it's sent.

Avoidance of double-counting with session-level checks.

Data is available in Log Analytics and visualized through Power BI.

Deployment Instructions
Content snippet created in Power Pages with the AI JavaScript snippet.

Site Setting applicationinsights/enabletracking holds the connection string.

Manual RFC required to update this setting in PROD.

Updates should follow change control process (RFC with 3-day notice).

Known Limitations / Risks
Instrumentation key is part of the connection string (as per Microsoft’s design), but telemetry data submission only — cannot be used to view or alter data.

Possible spam risk if key is abused — alerts are set in App Insights to monitor for spikes.

Data filtering available via custom dimensions in Power BI to exclude noise or test data.

Next Steps
Add telemetry tracking for specific user actions (e.g., downloads, form submissions).

Refine page view capture across remaining portal pages.

Finalize dashboard views in Power BI for performance reporting.
