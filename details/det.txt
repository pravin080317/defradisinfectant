Here is a complete table listing the **required DAL2 APIs** (for use with Virtual Tables in SVT), based on the **Reval Sales data interaction scenarios**. The table includes **HTTP verb**, **endpoint path**, **use case**, and whether itâ€™s used for **RetrieveMultiple**, **RetrieveSingle**, **Update**, etc.

---

### ğŸ”§ **API Specification Table â€“ Virtual Table Support for SVT**

| **API Name**                       | **HTTP Verb** | **Endpoint Path**                          | **Description / Usage**                                                                 |
| ---------------------------------- | ------------- | ------------------------------------------ | --------------------------------------------------------------------------------------- |
| Get Reval Sales Record (List)      | `GET`         | `/reval-sales?filter=...&top=...&skip=...` | ğŸ”¹ *RetrieveMultiple* â€“ Used by dashboards and search views. Supports filters & paging. |
| Get Reval Sale by ID               | `GET`         | `/reval-sales/{id}`                        | ğŸ”¸ *RetrieveSingle* â€“ Shows the full sales record detail in the verification screen.    |
| Update Reval Sale                  | `PATCH`       | `/reval-sales/{id}`                        | ğŸ› ï¸ *Update* â€“ Updates source flag, condition score, decision values.                   |
| Create Reval Sale (if needed)      | `POST`        | `/reval-sales`                             | ğŸ†• *Create* â€“ Only if internal SVT job allows creation of custom sales records.         |
| Delete Reval Sale (rarely needed)  | `DELETE`      | `/reval-sales/{id}`                        | âŒ *Delete* â€“ Only for admin cleanup; not usually needed.                                |
| Search Reval Sales (Optimized)     | `GET`         | `/reval-sales/search?postcode=...`         | ğŸ” Alternative *RetrieveMultiple* endpoint with optimized lookup (by postcode/address). |
| Get Related Sources for Sale       | `GET`         | `/reval-sales/{id}/sources`                | ğŸ“„ *RetrieveSingle* â€“ Returns WLTT, LRPPD, MILO, PAD source data for a specific sale.   |
| Get Sale Verification History      | `GET`         | `/reval-sales/{id}/history`                | ğŸ“œ *RetrieveMultiple* â€“ Shows all past decision changes, source changes, audits.        |
| Get Tasks by User / Status         | `GET`         | `/svt-tasks?user=...&status=...`           | ğŸ“‹ *RetrieveMultiple* â€“ List of tasks (jobs) assigned to a user.                        |
| Get Task by ID                     | `GET`         | `/svt-tasks/{taskId}`                      | ğŸ”¸ *RetrieveSingle* â€“ Loads a task's details and linked sale.                           |
| Create Task (Job Assignment)       | `POST`        | `/svt-tasks`                               | âœ… *Create* â€“ Creates task/job for a sale, from Team Manager view.                       |
| Update Task Status                 | `PATCH`       | `/svt-tasks/{taskId}`                      | ğŸ”„ *Update* â€“ Used when status is changed (e.g. assigned, complete, sent for QA).       |
| Raise PAD Update / Enhancement Req | `POST`        | `/enhancement-requests`                    | ğŸ”” *Create* â€“ Raised from SVT UI when PAD change is needed (links to DAL1).             |
| Get PAD Data for Hered ID          | `GET`         | `/pad/{heredId}`                           | ğŸ  *RetrieveSingle* â€“ Fetches PAD attributes for display in the decision screen.        |
| Get Repeat Sales for a UARN        | `GET`         | `/reval-sales/repeat-sales?uarn=...`       | ğŸ” *RetrieveMultiple* â€“ For navigating across time-based sales of same property.        |

---

### ğŸ“ Notes:

* All endpoints must:

  * Support JSON responses
  * Have `id` as unique primary key for virtual table linking
  * Be secured via **Azure AD App Registration**
* **RetrieveMultiple** endpoints should ideally support:

  * `$top`, `$skip`, `$orderby`, `$filter`
  * OData-like query patterns or a DAL2-friendly equivalent

---

Would you like a visual API flow diagram or Swagger/OpenAPI sample next?
