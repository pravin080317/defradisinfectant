pageViews
| extend 
    userId = tostring(customDimensions.userId),
    sessionId = tostring(customDimensions.sessionId),
    userCouncil = tostring(customDimensions.userCouncil)
| where userId != "Anonymous" and userCouncil != "Unknown" and isnotempty(userCouncil)
| summarize councilsUsed = make_set(userCouncil), numCouncils = dcount(userCouncil) by userId, sessionId
| where numCouncils > 1
| order by userId, sessionId


customEvents
| where name == "LAPortalLogin"
| extend 
    userId = tostring(customDimensions.userId),
    userCouncil = tostring(customDimensions.userCouncil),
    sessionId = tostring(customDimensions.sessionId)
| summarize councilsUsed = make_set(userCouncil), numCouncils = dcount(userCouncil) by userId, sessionId
| where numCouncils > 1
| order by userId, sessionId
