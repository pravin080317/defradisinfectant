Runbook Update - Performance Analyst Data Access & Logging
Overview
The objective of this update is to outline the agreed approach for providing Performance Analysts with access to LA Portal request data for reporting and analysis. This access will be facilitated in two phases:

Day 1: Immediate data access using existing security roles.
Day 2: Long-term solution by implementing a dedicated role with appropriate access controls.
Day 1 - Immediate Access via Existing Roles
Objective
Enable Andrew McNeil to retrieve LA Portal request data for the last 7 days, including:

Request submission timestamp
User ID (if available)
Billing Authority (council name)
Access Method
Andrew has been assigned VOA-BST Programme Read Only User role in SIT for validation.
If successful, the same role will be assigned in PROD to allow reporting in the live environment.
Data Retrieval API Endpoint
The following API endpoint will be used to extract the required data:

bash
Copy
Edit
https://voabstdev.crm11.dynamics.com/api/data/v9.2/voa_requestlineitems?
$select=createdon,voa_customer2id_value,voa_enquiryid_value,voa_name,
voa_integrationdatasourceid_value
&$expand=voa_ProposedBillingAuthorityId($select=accountid,websiteurl,name,emailaddress1)
&$filter=(voa_integrationdatasourceid_value eq edd0f130-24cc-ed11-a7c6-6045bd0d6729
and Microsoft.Dynamics.CRM.LastXDays(PropertyName='createdon', PropertyValue=7))
and (voa_ProposedBillingAuthorityId/accountid ne null)
&$top=50
Expected Data Format
Example response structure:

json
Copy
Edit
{
  "@odata.context": "https://voabstdev.crm11.dynamics.com/api/data/v9.2/$metadata#voa_requestlineitems",
  "value": [
    {
      "createdon": "2025-02-03T15:32:21Z",
      "voa_customer2id_value": "ced42469-c15d-ec11-8f8f-00224842cba8",
      "voa_requestlineitemid": "85f8618e-44e2-ef11-9342-00224800e7d8",
      "voa_integrationdatasourceid_value": "edd0f130-24cc-ed11-a7c6-6045bd0d6729",
      "voa_name": "CT: Request, Pending Validation, 53 ST PETERS COURT, BRISTOL",
      "voa_ProposedBillingAuthorityId": {
        "accountid": "ced42469-c15d-ec11-8f8f-00224842cba8",
        "name": "Bristol"
      }
    }
  ]
}
Day 2 - Long-Term Solution with a New Security Role
Objective
Provide Performance Analysts with structured access to transactional data related to LA Portal submissions, ensuring security and compliance.

Proposed Solution
Define a new SRS Role with custom security permissions.
Assess whether existing roles (e.g., VOA-BST Programme Read Only User) can be reused or need modifications.
Ensure access is restricted to only required datasets (e.g., request data, timestamps, council details).
Next Steps
Business approval for the new SRS role.
Define exact role permissions to prevent unauthorized data access.
Implementation and testing in SIT before rolling out to PROD.
Security Considerations
Access control through Azure Entra ID (formerly Azure AD) authentication.
Data protection & compliance to ensure no unnecessary exposure of PII.
Integration with Azure Application Insights for tracking login & activity data.
This documentation will be updated as the security roles and permissions evolve.
