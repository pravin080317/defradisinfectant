DECLARE @xml_body XML;

SET @xml_body =
(
    SELECT
        (
            SELECT 
                -- âœ… Fix escaping issue for Billing Authority Report
                CAST((
                    SELECT 
                        CASE 
                            WHEN ISNULL(CTO.[Billing Authority Report], '') = '' THEN 
                                '<td aria-hidden="true"></td>' 
                            ELSE 
                                '<td>' + CAST(CTO.[Billing Authority Report] AS NVARCHAR(MAX)) + '</td>' 
                        END AS [text()]
                    FOR XML PATH(''), TYPE
                ).value('.', 'NVARCHAR(MAX)') AS XML),

                -- ðŸŸ¢ Other fields left as-is
                (SELECT CTO.[Property Address] AS 'td' FOR XML PATH(''), TYPE),
                (SELECT CTO.[Property Reference] AS 'td' FOR XML PATH(''), TYPE)

            FROM #CT_Outstanding CTO
            ORDER BY 
                CTO.town_no ASC,
                CTO.street,
                CTO.postcode,
                CTO.building_number_int,
                CTO.building_number,
                CTO.building_name,
                CTO.sub_building_identifier
            FOR XML PATH('tr'), TYPE
        )
);
