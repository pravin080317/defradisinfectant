Great! Let‚Äôs now work on **Point 3: User Journey Analysis** under the performance monitoring workbook.

Here‚Äôs how you can structure this section with **KQL queries** and suggested **chart types** for each subtitle:

---

## üìò **User Journey Analysis**

### üß≠ 1. **Page Navigation Flow**

*Track the sequence of pages users navigate through.*

```kql
pageViews
| extend 
    userId = tostring(customDimensions.userId),
    sessionId = tostring(customDimensions.sessionId),
    page = name,
    timestamp = timestamp
| where isnotempty(userId) and userId != "Anonymous"
| project userId, sessionId, page, timestamp
| order by sessionId asc, timestamp asc
```

üî∑ **Recommended Visual**:

* **Table** (for debugging or simple review)
* Optional: Export this and generate Sankey-style navigation flow in Power BI

---

### ‚è± 2. **User Session Timelines**

*Visualize session duration and page sequence.*

```kql
pageViews
| extend 
    userId = tostring(customDimensions.userId),
    sessionId = tostring(customDimensions.sessionId),
    page = name,
    timestamp = timestamp
| where isnotempty(userId) and userId != "Anonymous"
| summarize sessionStart = min(timestamp), sessionEnd = max(timestamp), pagesVisited = make_list(page) by userId, sessionId
| extend sessionDuration = datetime_diff("minute", sessionEnd, sessionStart)
```

üî∑ **Recommended Visual**:

* **Grid/Table** with:

  * `sessionId`
  * `userId`
  * `sessionStart`
  * `sessionEnd`
  * `sessionDuration`
  * `pagesVisited`
* Optionally use **Timeline** if visualizing trends over time

---

### ‚ùå 3. **Drop-off Analysis**

*Identify which page is the last in the session.*

```kql
pageViews
| extend 
    userId = tostring(customDimensions.userId),
    sessionId = tostring(customDimensions.sessionId),
    page = name,
    timestamp = timestamp
| where isnotempty(userId) and userId != "Anonymous"
| summarize lastPageTime = max(timestamp) by sessionId
| join kind=inner (
    pageViews
    | extend 
        userId = tostring(customDimensions.userId),
        sessionId = tostring(customDimensions.sessionId),
        page = name,
        timestamp = timestamp
) on sessionId, $left.lastPageTime == $right.timestamp
| summarize dropOffCount = count() by page
| order by dropOffCount desc
```

üî∑ **Recommended Visual**:

* **Bar chart** showing `page` vs `dropOffCount`

---

Would you like to continue with **Crash Monitoring (Point 4)** or should I help you start building the workbook now in the Azure Portal UI?
