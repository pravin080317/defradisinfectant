<table class="govuk-table" id="{{ tableid }}">
  <caption class="govuk-table_caption">
    List of submitted reports (click a column header to sort)
  </caption>
  <thead class="govuk-table_head">
    <tr class="govuk-table_row">
      <th scope="col" class="govuk-table_header">
        <a href="#" onclick="event.preventDefault(); sortTable(0)" class="govuk-link sort-control"
           style="color: #005ea5"
           aria-sort="none"
           aria-label="Billing authority report number, not sorted. Activate to sort ascending.">
          Billing authority report number
          <span aria-hidden="true" class="sort-triangle"></span>
        </a>
      </th>
      <th scope="col" class="govuk-table_header">
        <a href="#" onclick="event.preventDefault(); sortTable(1)" class="govuk-link sort-control"
           style="color: #005ea5; white-space: nowrap;"
           aria-sort="none"
           aria-label="Billing authority reference number, not sorted. Activate to sort ascending.">
          Billing authority reference number
          <span aria-hidden="true" class="sort-triangle"></span>
        </a>
      </th>
      <th scope="col" class="govuk-table_header">
        <a href="#" onclick="event.preventDefault(); sortTable(2, true)" class="govuk-link sort-control"
           style="color: #005ea5; white-space: nowrap;"
           aria-sort="none"
           aria-label="Date created, not sorted. Activate to sort ascending.">
          Date created
          <span aria-hidden="true" class="sort-triangle"></span>
        </a>
      </th>
      <th scope="col" class="govuk-table_header">
        <a href="#" onclick="event.preventDefault(); sortTable(3)" class="govuk-link sort-control"
           style="color: #005ea5; white-space: nowrap;"
           aria-sort="none"
           aria-label="Postcode, not sorted. Activate to sort ascending.">
          Postcode
          <span aria-hidden="true" class="sort-triangle"></span>
        </a>
      </th>
      <th scope="col" class="govuk-table_header" style="color: #005ea5">
        Supporting documents
      </th>
      <th scope="col" class="govuk-table_header" style="color: #005ea5">
        Action
      </th>
    </tr>
  </thead>
  <tbody class="govuk-table_body">
    {% for result in reports.results.entities %}
      {% assign docCount = result['att.supportingDocumentsCount'] | default: 0 %}
      <tr class="govuk-table_row">
        <td class="govuk-table_cell">
          {% if result.reportNumber %}
            <a class="govuk-link"
               href="{{ sitemarkers['UMR006 Report Details'].url }}?id={{ result.requestId }}">
              {{ result.reportNumber }}
            </a>
          {% endif %}
        </td>
        <td class="govuk-table_cell">{{ result.referenceNumber }}</td>
        <td class="govuk-table_cell">{{ result.createdOn | date: 'dd MMM yyyy HH:mm' }}</td>
        <td class="govuk-table_cell">{{ result.postcode }}</td>
        <td class="govuk-table_cell">{{ docCount }}</td>
        <td class="govuk-table_cell">
          {% if docCount == 0 %}
            <a class="govuk-link"
               href="{{ sitemarkers['UMR004 Upload Evidence'].url }}?id={{ result.requestId }}">
              Add documents
              <span class="govuk-visually-hidden">for report {{ result.reportNumber }}</span>
            </a>
          {% else %}
            <a class="govuk-link"
               href="{{ sitemarkers['UMR006 Report Details'].url }}?id={{ result.requestId }}#supporting-documents">
              View supporting documents
              <span class="govuk-visually-hidden">for report {{ result.reportNumber }}</span>
            </a>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
