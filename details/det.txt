| Option                                                                | Description                                                                                               | Suitable for                                                         | Auth / Security                                       | HMRC Compliance                                   | Comments                                                           |
| --------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------- | ----------------------------------------------------- | ------------------------------------------------- | ------------------------------------------------------------------ |
| **1️⃣ Dataverse Custom API + Plugin (Server-side)**                   | Register a *Custom API* in Dataverse that triggers a C# Plugin. The Plugin calls external API (via APIM). | Secure backend integration (e.g. create/update PAD, SVT data fetch). | Uses Dataverse service principal or managed identity. | ✅ Fully compliant (no secrets in UI).             | Best for “server-to-server” calls — async or transactional.        |
| **2️⃣ Custom Connector (Canvas App)**                                 | Canvas App connects to API via Power Platform Custom Connector (using APIM endpoint).                     | For UI-driven fetch (e.g. SVT dashboard search/filter).              | OAuth 2.0 via Azure AD (through APIM).                | ✅ if connector uses Azure AD & no hardcoded keys. | Best for read-only dashboard data — aligns to SVT search scenario. |
| **3️⃣ PCF Control → Dynamics Web API → APIM (via Service Principal)** | PCF runs client-side JS; it calls a Dataverse custom action or directly APIM (through token).             | For complex UI components (map, batch split, flag summary grid).     | Needs MSAL to acquire token from Azure AD.            | ⚠️ Allowed only if token acquired securely.       | More complex but powerful (used in SBL/AVM PCFs).                  |
| **4️⃣ Power Automate (Custom Action bridge)**                         | Triggered via Canvas App; Flow calls external API.                                                        | For background updates / batch submission.                           | Flow connection uses service principal.               | ✅ Safe but slower.                                | Not suitable for high-frequency filtering.                         |
| **5️⃣ Direct HTTP call from Canvas app (Not Allowed)**                | Using `HTTP()` or `Office365HttpRequest` directly from Canvas.                                            | None.                                                                | Uses user identity.                                   | ❌ Violates HMRC/VOA boundary controls.            | Never use for production.                                          |
