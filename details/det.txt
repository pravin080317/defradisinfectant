**SVT Access Control and Security Model: Solution Design Summary**

---

### üîê Core Design Principles

* SVT is embedded within the existing **CT (Council Tax)** model-driven app and launched via a Canvas App custom page.
* All access to SVT functionality is governed via:

  * **SRS Roles** (for auditability and AD sync)
  * **Dataverse Security Roles** (for model-driven access/navigation)
  * **Canvas App Power FX Rules** (for screen visibility and edit control)
* **All SVT users must be existing CSC users**, ensuring they have base access to the CT app.

---

### üîÑ Role-Based Access Model

| Layer                  | Role Type                                    | Purpose & Usage                                                      |
| ---------------------- | -------------------------------------------- | -------------------------------------------------------------------- |
| **SRS Role**           | `VO_SVT_USER`, `VO_SVT_QA`, `VO_SVT_MANAGER` | Grants access to corresponding AD groups synced to D365.             |
| **Azure AD Group**     | Synced from SRS                              | Used by Power Platform for evaluating user role at runtime.          |
| **D365 Security Role** | `SVT User`, `SVT QA`, `SVT Manager`          | Allows access to CT App + SVT navigation + Dataverse data if needed. |
| **Base CT Role**       | `CSC_User_<env>`                             | Mandatory base access to the CT app (e.g., `CSC_User_MO`).           |
| **Canvas App Logic**   | Power FX expressions                         | Controls section visibility/edit access within SVT UI.               |

---

### üìÑ User Access Journey

1. **User Setup**:

   * Must already be a `CSC_User_<env>` (CT app base role).
   * Manager requests **SRS assignment** for one of the SVT roles.

2. **SRS Workflow**:

   * SRS assigns user to corresponding AD group.
   * AD group syncs to Power Platform.

3. **Canvas App Enforcement**:

   * App checks AD membership or Dataverse team mapping.
   * Section controls (QA, Sales Verification, Manager actions) are conditionally enabled using Power FX.

---

### üìä Technical Integration Points

* **SVT data is stored in external VAST SQL**, surfaced via **Dataverse Virtual Tables**.
* Security is enforced at the UI level using Power FX expressions.
* `systemuser` and `team` Dataverse tables will be exported via **Azure Synapse Link** to VAST SQL to:

  * Populate ownership fields (systemuser ID, team ID)
  * Support record-level traceability and access control in downstream systems.

---

### ‚úâÔ∏è Assumptions (to be confirmed in SDG)

1. All SVT users already hold a valid **CSC user SRS role**.
2. One set of **SVT SRS roles** will be reused across environments (Dev, PreProd, Prod).
3. SVT will only be accessible from within the CT app; no standalone access planned.
4. Canvas App logic is responsible for enforcing role-based access control.
5. SVT will not manage roles via Teams; all access is SRS + AD + D365 role based.

---

### ‚ùå Deprecated Options (Discarded)

| Option                          | Reason for Discarding                                                |
| ------------------------------- | -------------------------------------------------------------------- |
| Canvas App + Team-based control | Insufficient auditability and difficult to manage revocation.        |
| App-only logic without SRS      | Breaks compliance with HMRC IAM patterns and lacks governance trail. |

---

### üìä Next Steps & Actions

| Task                                     | Owner/Team         | Notes                                                 |
| ---------------------------------------- | ------------------ | ----------------------------------------------------- |
| Create SRS Roles (`VO_SVT_*`)            | IAM / Roles Team   | Align naming to existing VO role standards.           |
| Define D365 Security Roles               | CT Platform Team   | Clone from CSC base role + restrict SVT access areas. |
| Implement Canvas App Role Checks         | SVT Dev Team       | Power FX based logic for section visibility.          |
| Enable Synapse Link for User/Team tables | DataOps            | Required for ownership tracking in VAST SQL.          |
| Capture all access logic in SDG          | Solution Architect | Link assumptions, flow diagrams, user story mapping.  |

---

Would you like the accompanying Confluence page headings or an SDG table-of-contents generated from this?
